<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>cloudflared内网穿透 | 曦暮流年</title><meta name="keywords" content="cloudflared内网穿透,cloudflared,cloudflared Zero,cloudflared tunnel"><meta name="author" content="曦暮流年"><meta name="copyright" content="曦暮流年"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="cloudflared内网穿透"><meta name="application-name" content="cloudflared内网穿透"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="cloudflared内网穿透"><meta property="og:url" content="https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html"><meta property="og:site_name" content="曦暮流年"><meta property="og:description" content="cloudflared零信任内网穿透，众多协议http&amp;#x2F;https、tcp、ssh等等"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/3.png"><meta property="article:author" content="曦暮流年"><meta property="article:tag" content="博客,曦暮流年,曦暮,流年,ximuliunian,blog"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/3.png"><meta name="description" content="cloudflared零信任内网穿透，众多协议http&amp;#x2F;https、tcp、ssh等等"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;906dd30782494835be66cd14f401c890&quot;}"></script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"\\img\\system\\sbgg.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 曦暮流年","link":"链接: ","source":"来源: 曦暮流年","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '曦暮流年',
  title: 'cloudflared内网穿透',
  postAI: '',
  pageFillDescription: 'Cloudflared Zero Trust, 准备工作, 网页版, 初始化, 操作, 指令版, 下载, 身份认证, 新建 Tunnel, 配置DNS记录, 网站配置, 指令配置, 配置文件编写, 执行 Tunnel, 服务, 安装服务, 启动服务, 查看是否OK, Windows使用, 操作, 启用穿透, 速度, 常用指令, 特殊, 脚本, 注意事项, 下载, 源码是公司推出的一项企业级虚拟网关服务官方对其介绍如下是一个安全框架旨在通过验证和保护所有的网络访问无论用户或地点来保护组织免受网络威胁该框架基于不信任任何人的原则这意味着所有访问请求在被批准之前必须经过验证和授权旨在提供一种全面的安全方法涵盖一个组织的网络和基础设施的所有方面这包括用户认证设备安全网络分段和应用安全的主要好处之一是它能够提供细化的访问控制使企业能够根据用户角色和权限限制对敏感资源的访问这可以通过最小化攻击面和限制任何潜在漏洞的影响来帮助防止数据泄露和其他安全事件是一项基于云的服务可以很容易地与组织的现有安全基础设施集成它的设计具有可扩展性和灵活性允许企业定制框架以满足其特定需求和要求通过翻译本文仅使用其中的功能对其余功能不做赘述准备工作一个域名通过阿里云等购买然后解析到上一个账号一台设备本文使用的系统是一张双币信用卡到后面需要验证但是可能也不需要因为我第一次使用的时候要信用卡验证但是等我第二次用的时候就不需要了一共有两种操作方式一个网页版操作一个是本地指令操作下面所作的一切操作的前提就是上面的已经准备好了在此说一下除了协议外像是其他的这些协议是需要端对端的链接映射端口的网页版初始化登录之后点击左边的来到这个页面点击这里的是我之前做的所以忽略之后点击页面的新建就是哪个蓝色的按钮这里是输入这个隧道的名称随便输入就行之后就到了这个页面根据自己的系统选就行我是所以选那个企鹅因为下面两个框要是第一次使用的话就选左边的框里面因为是要从上下载东西但是在国内经常抽风所以需要一个节点来加速原链接新链接就是这个链接然后把链接复制到终端加速下载看到这个就是代表安装好了然后回到网页看看是否成功如果在链接的下面看到有显示数据或者退出去隧道状态显示绿色就代表了然后滑倒下面点击右下角的操作这个是让你输入对应内容进行穿透按照图片提示输入即可在这里再次说一下除了协议外像是其他的这些协议是需要端对端的链接映射端口的这个稍后说在里面填的映射端口要是协议的话是可以直接游览器访问的这些就可以让家里不用的设备去用来做网站什么的除了速度慢一点其他一切都好可以在一条隧道里面添加多条数据使用但是毕竟是免费版的所以会有条数限制具体就不再演示指令版下载把这个复制到控制台上然后运行开始下载链接跟上面的一样只不过这是优化后的链接和没有第三行绑定内容软件默认安装到目录下身份认证使用需要使用者登录账号以进行授权出现上图内容之后复制其中的链接到本地游览器进行登录认证操作成功之后就会出现下图本地也会进行相应的操作如下图大致意思就是登录成功已经在目录下生成了一个文件这个文件差不多就是类似于认证证书什么的反正很重要新建样品名字例子如我想创建一个名为的运行之后就会就会在目录下生成一个隧道凭据是文件同时还有隧道就是文件的名字这个东西很重要千万不能丢配置记录有两种方法进行配置第一种方法就是直接去网站里面进行配置第二种就是指令配置网站配置进入到你的网站解析页面新建一条记录就如下面这让类型名称随便填目标创建隧道的其他默认就好点击保存就好了指令配置还是打开终端然后按照下面的格式输入指令隧道的想要绑定的域名或二级域名出现下图情况就是绑定成功了配置文件编写参考本地管理的隧道零信任文档在目录下创建一个名为的文件使用命令进行创建和编写是一个兼容的文本编辑器通常用来编辑纯文本文件名命令可以编辑一个文件若文件名不存在则会新建在目录下使用进入页面后点击键进入书写模式并写入以下内容后面的包括可以不写隧道隧道记录名称接入的域名域名就是相面配置的域名这里面就是本地映射的端口这里写这个是为了判断是否配置成功不管上面怎么设置下面永远是这一条否则就出错这个可以配置多个只需要配置相对应的在上面多添加一条记录即可格式如下记录名称接入的域名记录名称接入的域名记录名称接入的域名写完之后点击键盘左上角的键然后输入保存并退出这样就会有文件了执行配置文件路径如果在目录下那么执行下面语句如果不指定配置文件路径会默认读取别管报错的有多离谱只要上面配置对了那么基本上就没问题报错那就多运行几次直到运行到隧道为状态绿色为止这就代表是成功了访问一下你刚才绑定的域名如果你用的是那么你访问的结果会是下图但是还没完还要把这个搞成服务服务安装服务他会在目录下创建个文件会在目录下创建文件安装好之后会有下图情况大概意思就是和存在冲突要么删除目录下的文件要么运行一下这个指令应该是用于区分作用此时他的服务默认路径不是咱在下创建的文件而是运行的下的文件上面这个这个咱不用管咱只需要把路径调试对即可因为安装服务的时候在目录下创建了三个文件其中有一个文件用编译器打开它在第行左右的位置更改一下内容格式文件路径原内容新内容然后就了如果此时服务以运行那么就进行重启服务即可如遇到报错内容根据内容进行输入即可启动服务启动服务查看服务状态可选重启服务更新后数据后重启一下查看是否通过端对端的映射可以看到已经是映射成功了其他协议也可以这样搞使用在系统以下简称中也需要内穿比如测试程序穿透某项服务等在中操作方式跟大差不差首先需要下载相对应的软件在中有两种软件一种是后缀为的安装程序还有一个是的程序我使用的是程序至于区别以下为的答案和是两种不同的文件格式通常用于在操作系统上安装应用程序或工具这两个文件的区别在于它们的安装方式和功能文件是包的文件扩展名通常用于安装程序当您双击运行一个文件时将会启动安装向导引导您完成安装过程这种文件格式通常提供更多的安装选项和设置例如选择安装路径添加桌面快捷方式等文件可能是工具的安装程序通过运行这个文件您可以按照安装向导的指示在系统上安装工具文件是可执行文件的常见扩展名它们通常是独立的可执行程序当您运行一个文件时它会直接执行其中的程序代码而无需通过安装向导文件可能是工具的独立可执行文件通过运行这个文件您可以直接启动工具而无需进行安装过程因此如果您想要安装工具并在系统中进行设置您可以选择运行文件以启动安装向导如果您只是想要快速运行工具而不需安装您可以选择运行文件操作首先穿透的时候不是使用网页版的而是使用本地配置文件的方式进行跟以上指令版很像首先建议配一下环境变量如果你知道如何操作的话不配也行然后打开命令窗口输入以下命令进行授权操作完成授权之后会在目录中生成登录凭证之后才可以进行后续的操作创建隧道处写上隧道名创建隧道完成还是会在目录下生成隧道的凭据是一个名是的文件然后配置穿透需要的域名隧道域名隧道就是生成的域名是二级域名建议使用泛解析可以不需要重复的进行域名绑定操作如然后编写配置文件在你存放程序的文件夹中创建一个文件然后开始编辑内容如下隧道的标识隧道的隧道的凭据用户名隧道凭据穿透的内容可以有多个服务域名本机服务服务默认错误一定要有这个最后一个入口规则必须是与所有流量匹配的规则对上面的配置按照提示进行修改在上面的服务中域名有和两个甚至可能更多配置一个域名的泛解析之后会非常方便的进行穿透不需要一直进行创建记录但是也有一个弊端就是如果二级域名重复会导致冲突在编写这种格式的文件需要注意缩进启用穿透创建一个文件如开启穿透对文件继续编辑输入以下内容其中后面的内容写上配置文件的全路径然后保存最后双击文件即可开始穿透速度在中有泛解析的一条数据这条数据默认是开启代理的这个建议不要关因为关闭的话链接超时的概率会非常大这是开启的情况下进行次的速度正在具有字节的数据来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间来自的回复字节时间的统计信息数据包已发送已接收丢失丢失往返行程的估计时间以毫秒为单位最短最长平均常用指令创建隧道通过此命令可以创建一个新的隧道是您为隧道指定的名称启动隧道使用此命令可以启动指定名称的隧道停止隧道通过此命令可以停止运行中的隧道删除隧道使用此命令可以删除指定的隧道列出隧道该命令可以列出所有已创建的隧道查看隧道状态通过此命令可以查看特定隧道的状态信息特殊像是这一类的协议是需要端对端的支持什么意思呢就是你是对进行的内网穿透你想要在上进行或者的使用就需要在上面下载一个软件供使用找到适合的版本下载下载链接然后在软件路径上进行运行看看是否能正常输出版本号能的话就可以对其及进行操作了比如我内穿了端口到网址上那么就要在本地进行端口映射还是在然后在软件路径上进行输入以下内容样品协议网址端口例子出现下图中则代表把网址映射到本地的端口因为映射的是的远程所以可以通过软件尝试连接可以看到在本地的已经被映射到本地了并且也可以被访问同理其他特殊协议也是这样的就如我的世界服务器在上面开设服务器在的端口正常开放通过内网穿透映射到网址上在通过上面这一串指令映射到本地就可以进行连接脚本但是他要一直运行着那个黑窗口才能正常进行本地映射那有没有什么方法可以没有这个黑窗口但是也能保持映射状态呢通过我的绞尽脑汁的思考突然灵光一现服务这个词出现在了我的脑海中既然服务实在后台开着呢那我是不是也可以进行保持映射状态呢想到这里我就去试了一试不出我所料果然可以然后通过着进行了语言的脚本编写最终写完了注意事项可以把下载的软件和软件这两放在一个文件夹里面使用软件有一个前提那就是要使用管理员的方式打开文件否则无法打开可以右键软件点击属性点击上面的兼容性一栏勾选以管理员身份运行此程序要把软件配置到环境变量里面右键此电脑属性高级系统设置环境变量系统变量在里面找到这条数据进入然后把软件的路径复制到上面去比如文件夹里面就有软件那么从文件夹开始包括往上到盘符的路径复制下来然后点击环境变量里面的新建把路径复制到上面去如何判断环境变量是否配置成功了在任何地方然后输入都可以输出信息那么就是配置成功了使用软件我自己写的会产生一个文件这个文件里面存放的是服务的信息万万不可删除有时也会有一个的文件出现这个文件也不要删切记切记切记下载点击下载源码请以管理员身份打开曦暮流年端口映射曦暮流年端口映射增加服务删除服务查看服务启用服务关闭服务退出作者博客请输入数字编号感谢使用再见输入的不是应有的编号哦请重新输入请输入服务名字请输入类型请输入映射网址请输入被映射的端口如请输入删除序号序号服务名字类型映射网址被映射端口请输入序号请输入序号',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-19 00:00:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/touxiang.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.ximuliunian.top/" title="主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="主页"/><span class="back-menu-item-text">主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.ximuliunian.top" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://nav.ximuliunian.top" title="导航栏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="导航栏"/><span class="back-menu-item-text">导航栏</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gpt.ximuliunian.top" title="GPT"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GPT"/><span class="back-menu-item-text">GPT</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">曦暮流年</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-huidang"></use></svg><span> 回档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 下载</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/Download/Windows.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pcduandiannao"></use></svg><span> PC端</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Download/Android.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouji"></use></svg><span> 移动端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wallpaper/TuPian.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bianpingbizhi"></use></svg><span> 壁纸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/geren/ghjs.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-ghjs"></use></svg><span> github加速</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/shoukuan/weixin.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/weixin.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/shoukuan/zhifubao.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/zhifubao.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 1.05rem;">API<sup>1</sup></a><a href="/tags/B-%E6%A0%91/" style="font-size: 1.05rem;">B+树<sup>1</sup></a><a href="/tags/BFC/" style="font-size: 1.05rem;">BFC<sup>1</sup></a><a href="/tags/B%E6%A0%91/" style="font-size: 1.05rem;">B树<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/CentOS-7/" style="font-size: 1.05rem;">CentOS 7<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/SSH/" style="font-size: 1.05rem;">SSH<sup>1</sup></a><a href="/tags/Tree/" style="font-size: 1.05rem;">Tree<sup>1</sup></a><a href="/tags/URL/" style="font-size: 1.05rem;">URL<sup>1</sup></a><a href="/tags/bat/" style="font-size: 1.05rem;">bat<sup>1</sup></a><a href="/tags/cloudflare/" style="font-size: 1.05rem;">cloudflare<sup>2</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>4</sup></a><a href="/tags/office/" style="font-size: 1.05rem;">office<sup>1</sup></a><a href="/tags/%E4%BA%91%E7%9B%98/" style="font-size: 1.05rem;">云盘<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 1.05rem;">代码<sup>6</sup></a><a href="/tags/%E4%BF%AE%E6%94%B9/" style="font-size: 1.05rem;">修改<sup>1</sup></a><a href="/tags/%E5%85%83%E7%B4%A0/" style="font-size: 1.05rem;">元素<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 1.05rem;">内网穿透<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>2</sup></a><a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">命令<sup>2</sup></a><a href="/tags/%E5%B0%8F%E5%AE%9E%E4%BE%8B/" style="font-size: 1.05rem;">小实例<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">小知识<sup>9</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>10</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF/" style="font-size: 1.05rem;">微软<sup>1</sup></a><a href="/tags/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" style="font-size: 1.05rem;">报错解决方法<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%8E%86/" style="font-size: 1.05rem;">日历<sup>1</sup></a><a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 1.05rem;">注释<sup>1</sup></a><a href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" style="font-size: 1.05rem;">游览器<sup>2</sup></a><a href="/tags/%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">版本工具<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>2</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">系统<sup>2</sup></a><a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 1.05rem;">编辑器<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%9B%98/" style="font-size: 1.05rem;">网盘<sup>1</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 1.05rem;">网页<sup>1</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 1.05rem;">脚本<sup>4</sup></a><a href="/tags/%E9%82%AE%E7%AE%B1/" style="font-size: 1.05rem;">邮箱<sup>1</sup></a><a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 1.05rem;">链接<sup>1</sup></a><a href="/tags/%E9%AB%98%E4%BA%AE/" style="font-size: 1.05rem;">高亮<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9A%8F%E8%AE%B0/" itemprop="url">随记</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%B7%A5%E5%85%B7/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>工具</span></a><a class="article-meta__tags" href="/tags/%E5%91%BD%E4%BB%A4/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>命令</span></a><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/CentOS-7/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>CentOS 7</span></a><a class="article-meta__tags" href="/tags/C%E8%AF%AD%E8%A8%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>C语言</span></a><a class="article-meta__tags" href="/tags/%E8%84%9A%E6%9C%AC/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>脚本</span></a><a class="article-meta__tags" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>内网穿透</span></a><a class="article-meta__tags" href="/tags/cloudflare/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>cloudflare</span></a></span></div></div><h1 class="post-title" itemprop="name headline">cloudflared内网穿透</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-09-27T19:45:41.000Z" title="发表于 2023-09-27 19:45:41">2023-09-27</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-04-19T00:00:00.000Z" title="更新于 2024-04-19 00:00:00">2024-04-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为河南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>河南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/3.png"></div></header><main id="blog-container"><div id="single_top"><div class="author-content author-content-item single" style="background: url(https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/3.png) top / cover no-repeat;"><div class="card-content"><div class="author-content-item-tips"></div><span class="author-content-item-title">cloudflared内网穿透</span><div class="content-bottom"><div class="tips"></div></div><div class="banner-button-group"><a class="banner-button" onclick="pjax.loadUrl(&quot;/about&quot;)"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right" style="font-size: 1.5rem"></i><span class="banner-button-text">关于我</span></a></div></div></div></div><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"><header><a class="post-meta-categories" href="/categories/%E9%9A%8F%E8%AE%B0/" itemprop="url">随记</a><a href="/tags/%E5%B7%A5%E5%85%B7/" tabindex="-1" itemprop="url">工具</a><a href="/tags/%E5%91%BD%E4%BB%A4/" tabindex="-1" itemprop="url">命令</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/CentOS-7/" tabindex="-1" itemprop="url">CentOS 7</a><a href="/tags/C%E8%AF%AD%E8%A8%80/" tabindex="-1" itemprop="url">C语言</a><a href="/tags/%E8%84%9A%E6%9C%AC/" tabindex="-1" itemprop="url">脚本</a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" tabindex="-1" itemprop="url">内网穿透</a><a href="/tags/cloudflare/" tabindex="-1" itemprop="url">cloudflare</a><h1 id="CrawlerTitle" itemprop="name headline">cloudflared内网穿透</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">曦暮流年</span><time itemprop="dateCreated datePublished" datetime="2023-09-27T19:45:41.000Z" title="发表于 2023-09-27 19:45:41">2023-09-27</time><time itemprop="dateCreated datePublished" datetime="2024-04-19T00:00:00.000Z" title="更新于 2024-04-19 00:00:00">2024-04-19</time></header><h2 id="Cloudflared-Zero-Trust"><a href="#Cloudflared-Zero-Trust" class="headerlink" title="Cloudflared Zero Trust"></a>Cloudflared Zero Trust</h2><p>Zero Trust是Cloudflare公司推出的一项企业级虚拟网关服务，官方对其介绍如下：</p>
<blockquote>
<p>Cloudflare Zero Trust是一个安全框架，旨在通过验证和保护所有的网络访问（无论用户或地点）来保护组织免受网络威胁。该框架基于 “不信任任何人 “的原则，这意味着所有访问请求在被批准之前必须经过验证和授权。</p>
<p>Zero Trust “旨在提供一种全面的安全方法，涵盖一个组织的网络和基础设施的所有方面。这包括用户认证、设备安全、网络分段和应用安全。</p>
<p>Zero Trust的主要好处之一是它能够提供细化的访问控制，使企业能够根据用户角色和权限限制对敏感资源的访问。这可以通过最小化攻击面和限制任何潜在漏洞的影响来帮助防止数据泄露和其他安全事件。</p>
<p>Cloudflare Zero Trust是一项基于云的服务，可以很容易地与组织的现有安全基础设施集成。它的设计具有可扩展性和灵活性，允许企业定制框架，以满足其特定需求和要求。</p>
<p>（通过<a target="_blank" rel="noopener" href="https://www.deepl.com/">DeepL</a>翻译）</p>
</blockquote>
<p>本文仅使用其中的<code>tunnel</code>功能，对其余功能不做赘述</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>一个域名（通过阿里云等购买然后解析到Cloudflare上）</li>
<li>一个Cloudflare账号</li>
<li>一台设备（本文使用的系统是<code>centos 7</code>）</li>
<li>一张双币信用卡（到后面需要验证，但是可能也不需要，因为我第一次使用<code>tunnel</code>的时候要信用卡验证，但是等我第二次用的时候就不需要了）</li>
</ol>
<blockquote>
<p>一共有两种操作方式，一个网页版操作，一个是本地指令操作</p>
<p>下面所作的一切操作的前提就是上面的已经准备好了</p>
<p>在此说一下，除了<code>http/https</code>协议外，像是其他的<code>tcp/ssh…</code>这些协议是需要端对端的链接映射端口的</p>
</blockquote>
<h2 id="网页版"><a href="#网页版" class="headerlink" title="网页版"></a>网页版</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>登录之后点击左边的<code>Zero Trust</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/1.png"></p>
<p>来到这个页面，点击Access-&gt;Tunnel</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/2.png"></p>
<p>这里的<code>xnj</code>是我之前做的，所以忽略，之后点击页面的新建，就是哪个蓝色的按钮</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/3.png"></p>
<p>这里是输入这个隧道的名称，随便输入就行，之后就到了这个页面，根据自己的系统选就行，我是<code>Linux</code>所以选那个企鹅，因为下面两个框，要是第一次使用的话就选左边的框，里面因为是要从<code>GitHub</code>上下载东西，但是GitHub在国内经常抽风，所以需要一个节点来加速</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/4.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/5.png"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#原链接</span></span><br><span class="line">curl -L --output cloudflared.rpm https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm &amp;&amp; </span><br><span class="line"></span><br><span class="line">sudo yum localinstall -y cloudflared.rpm &amp;&amp; </span><br><span class="line"></span><br><span class="line">sudo cloudflared service install eyJhIjoiNzQ0MTMwNW0IjoiNmM5ZDU0YzAtZDAyYS00MDJlLThlYjktZTdmMzg1YzRmkRnd0xUbGhOR1F0TjJKbU5tSTFPVGhsWTJFNCJ9</span><br><span class="line"></span><br><span class="line"><span class="comment">#新链接</span></span><br><span class="line">curl -L --output cloudflared.rpm https://ghjs.ximuliunian.top/https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm &amp;&amp; </span><br><span class="line"></span><br><span class="line">sudo yum localinstall -y cloudflared.rpm &amp;&amp; </span><br><span class="line"></span><br><span class="line">sudo cloudflared service install eyJhIjoiNzQ0MTMwNW0IjoiNmM5ZDU0YzAtZDAyYS00MDJlLThlYjktZTdmMzg1YzRmkRnd0xUbGhOR1F0TjJKbU5tSTFPVGhsWTJFNCJ9</span><br></pre></td></tr></table></figure>

<p>就是<code>https://ghjs.ximuliunian.top</code>这个链接，然后把链接复制到终端加速下载</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/6.png"></p>
<p>看到这个就是代表安装好了，然后回到网页看看是否成功，如果在链接的下面看到有显示数据或者退出去隧道状态显示绿色就代表🆗了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/7.png"></p>
<p>然后滑倒下面，点击右下角的<code>next</code></p>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/8.png"></p>
<p>这个是让你输入对应内容进行穿透，按照图片提示输入即可</p>
<blockquote>
<p>在这里再次说一下，除了<code>http/https</code>协议外，像是其他的<code>tcp/ssh…</code>这些协议是需要端对端的链接映射端口的，这个稍后说</p>
</blockquote>
<p>在里面填的映射端口，要是<code>http/https</code>协议的话是可以直接游览器访问的，这些就可以让家里不用的设备去用来做网站什么的，除了速度慢一点，其他一切都好</p>
<p>可以在一条隧道里面添加多条数据使用，但是毕竟是免费版的，所以会有条数限制具体就不再演示</p>
<h2 id="指令版"><a href="#指令版" class="headerlink" title="指令版"></a>指令版</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L --output cloudflared.rpm https://ghjs.ximuliunian.top/https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm &amp;&amp; </span><br><span class="line"></span><br><span class="line">sudo yum localinstall -y cloudflared.rpm</span><br></pre></td></tr></table></figure>

<p>把这个复制到控制台上，然后运行开始下载，链接跟上面的一样，只不过这是优化后的链接和没有第三行绑定内容</p>
<p>软件默认安装到：<code>/usr/local/bin</code>目录下</p>
<h3 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h3><p>使用Argo Tunnel Client 需要使用者登录 Cloudflare 账号以进行授权</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel login</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/13.png"></p>
<p>出现上图内容之后复制其中的链接到本地游览器进行登录认证操作，成功之后就会出现下图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/14.png"></p>
<p>本地也会进行相应的操作如下图，大致意思就是登录成功，已经在 <code>/root/.cloudflared/</code> 目录下生成了<code>cert.pem</code>一个文件，这个文件差不多就是类似于认证证书什么的，反正很重要</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/15.png"></p>
<h3 id="新建-Tunnel"><a href="#新建-Tunnel" class="headerlink" title="新建 Tunnel"></a>新建 Tunnel</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#样品</span></span><br><span class="line">cloudflared tunnel create [名字]</span><br><span class="line"><span class="comment">#例子 如我想创建一个名为 test 的Tunnel</span></span><br><span class="line">cloudflared tunnel create <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>运行之后就会就会在<code>/root/.cloudflared/</code>目录下生成一个隧道凭据（是json文件），同时还有隧道ID（就是json文件的名字），这个东西很重要，千万不能丢</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/16.png"></p>
<h3 id="配置DNS记录"><a href="#配置DNS记录" class="headerlink" title="配置DNS记录"></a>配置DNS记录</h3><p>有两种方法进行配置，第一种方法就是直接去网站里面进行配置，第二种就是指令配置</p>
<h4 id="网站配置"><a href="#网站配置" class="headerlink" title="网站配置"></a>网站配置</h4><p>进入到你的网站解析页面，新建一条记录就如下面这让</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/17.png"></p>
<p>类型：<code>CNAME</code></p>
<p>名称：随便填</p>
<p>目标：<code>创建隧道的ID.cfargotunnel.com</code></p>
<p>其他默认就好点击保存就好了</p>
<h4 id="指令配置"><a href="#指令配置" class="headerlink" title="指令配置"></a>指令配置</h4><p>还是打开终端，然后按照下面的格式输入指令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel route dns [隧道的ID] [想要绑定的域名或二级域名]</span><br></pre></td></tr></table></figure>

<p>出现下图情况就是绑定成功了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/18.png"></p>
<h3 id="配置文件编写"><a href="#配置文件编写" class="headerlink" title="配置文件编写"></a>配置文件编写</h3><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/configure-tunnels/local-management/">本地管理的隧道 ·Cloudflare 零信任文档</a></p>
</blockquote>
<p>在<code>/root/.cloudflared/</code>目录下创建一个名为<code>config.yml</code>的文件，使用<code>vi</code>命令进行创建和编写</p>
<blockquote>
<p>vim 是一个兼容 vi 的文本编辑器，通常用来编辑纯文本。 vi 文件名 命令可以编辑一个文件，若文件名不存在则会新建</p>
</blockquote>
<p>在目录下使用<code>vi config.yml</code>，进入页面后点击<code>I</code>键进入书写模式并写入以下内容，<code>#</code>后面的包括<code>#</code>可以不写</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tunnel:</span> <span class="string">隧道ID</span></span><br><span class="line"><span class="attr">credentials-file:</span> <span class="string">/root/.cloudflared/隧道ID.json</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> [<span class="string">CNAME</span> <span class="string">记录名称</span>]<span class="string">.[接入</span> <span class="string">CLoudflare</span> <span class="string">的域名]</span>  <span class="comment">#域名，就是相面配置的DNS域名</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">hello_world</span>	<span class="comment">#这里面就是本地映射的端口，这里写这个是为了判断是否配置成功</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">service:</span> <span class="string">http_status:404</span>	<span class="comment">#不管上面怎么设置，下面永远是这一条，否则就出错</span></span><br></pre></td></tr></table></figure>

<p>这个可以配置多个，只需要配置相对应的<code>DNS</code>在上面多添加一条记录即可，格式如下</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> [<span class="string">CNAME</span> <span class="string">记录名称</span>]<span class="string">.[接入</span> <span class="string">CLoudflare</span> <span class="string">的域名]</span>  </span><br><span class="line">    <span class="attr">service:</span> <span class="string">http://localhost:80</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> [<span class="string">CNAME</span> <span class="string">记录名称</span>]<span class="string">.[接入</span> <span class="string">CLoudflare</span> <span class="string">的域名]</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">tcp://0.0.0.0:25565</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> [<span class="string">CNAME</span> <span class="string">记录名称</span>]<span class="string">.[接入</span> <span class="string">CLoudflare</span> <span class="string">的域名]</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">ssh://0.0.0.0:22</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">service:</span> <span class="string">http_status:404</span>	</span><br></pre></td></tr></table></figure>

<p>写完之后点击键盘左上角的<code>ESC</code>键，然后输入<code>:wq</code>保存并退出，这样就会有<code>config.yml</code>文件了</p>
<h3 id="执行-Tunnel"><a href="#执行-Tunnel" class="headerlink" title="执行 Tunnel"></a>执行 Tunnel</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel --config [配置文件路径] run</span><br><span class="line"><span class="comment">#如果在 .cloudflared目录下，那么执行下面语句</span></span><br><span class="line">cloudflared tunnel --config config.yml run</span><br></pre></td></tr></table></figure>

<p>如果不指定配置文件路径，cloudflared 会默认读取 <code>~/.cloudflared/config.yml</code></p>
<p>别管报错的有多离谱，只要上面配置对了，那么基本上就没问题，报错那就多运行几次，直到运行到隧道为状态绿色为止</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/19.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/20.png"></p>
<p>这就代表是成功了，访问一下你刚才绑定的域名，如果你用的是<code>hello_world</code>那么你访问的结果会是下图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/21.png"></p>
<p>但是还没完，还要把这个搞成Linux服务</p>
<h3 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h3><h4 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared service install</span><br></pre></td></tr></table></figure>

<p>他会在<code>/etc/systemd/system</code>目录下创建3个文件（cloudflared.service、cloudflared-update.service、cloudflared-update.timer），会在 <code>/etc/cloudflared</code> 目录下创建<code>config.yml</code>文件</p>
<p>安装好之后会有下图情况</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/22.png"></p>
<p>大概意思就是，<code>/root/.cloudflared/config.yml</code>和<code>/etc/cloudflared/config.yml</code>存在冲突，要么删除 <code>/etc/cloudflared</code>目录下的<code>config.yml</code>文件，要么运行一下 <code>cloudflared --config /etc/cloudflared/config.yml service install</code>这个指令（应该是用于区分作用）</p>
<blockquote>
<p>此时他的服务默认路径不是咱在<code>root</code>下创建的文件，而是运行的<code>etc</code>下的文件</p>
</blockquote>
<p>上面这个这个咱不用管，咱只需要把路径调试对即可，因为安装服务的时候在<code>/etc/systemd/system</code>目录下创建了三个文件，其中有一个<code>cloudflared.service</code>文件，用编译器打开它，在第8行左右的位置更改一下内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#格式</span></span><br><span class="line">ExecStart=/usr/bin/cloudflared --no-autoupdate --config config文件路径 tunnel run</span><br><span class="line"><span class="comment">#原内容</span></span><br><span class="line">ExecStart=/usr/bin/cloudflared --no-autoupdate --config /etc/cloudflared/config.yml tunnel run</span><br><span class="line"><span class="comment">#新内容</span></span><br><span class="line">ExecStart=/usr/bin/cloudflared --no-autoupdate --config /root/.cloudflared/config.yml tunnel run</span><br></pre></td></tr></table></figure>

<p>然后就OK了，如果此时服务以运行，那么就进行重启服务即可，如遇到报错内容，根据内容进行输入即可</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/23.png"></p>
<h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">systemctl start cloudflared</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看服务状态（可选）</span></span><br><span class="line">systemctl status cloudflared</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启服务（更新后数据后重启一下）</span></span><br><span class="line">systemctl restart cloudflared</span><br></pre></td></tr></table></figure>

<h3 id="查看是否OK"><a href="#查看是否OK" class="headerlink" title="查看是否OK"></a>查看是否OK</h3><p>通过端对端的映射可以看到，ssh已经是映射成功了，其他协议也可以这样搞</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/24.png"></p>
<h2 id="Windows使用"><a href="#Windows使用" class="headerlink" title="Windows使用"></a>Windows使用</h2><p>在windows系统（以下简称win）中也需要内穿，比如测试程序、穿透某项服务等。在win中操作方式跟linux大差不差，首先需要下载相对应的软件在GitHub中有两种软件一种是后缀为 <code>msi</code> 的安装程序，还有一个是 <code>exe</code> 的程序，我使用的是exe程序。至于区别以下为GPT的答案</p>
<blockquote>
<p><code>cloudflared-windows-amd64.msi</code> 和 <code>cloudflared-windows-amd64.exe</code> 是两种不同的文件格式，通常用于在 Windows 操作系统上安装应用程序或工具。这两个文件的区别在于它们的安装方式和功能：</p>
<ol>
<li><strong>cloudflared-windows-amd64.msi</strong>:</li>
</ol>
<ul>
<li><code>.msi</code> 文件是 Windows Installer 包的文件扩展名，通常用于安装程序。当您双击运行一个 <code>.msi</code> 文件时，Windows Installer 将会启动安装向导，引导您完成安装过程。这种文件格式通常提供更多的安装选项和设置，例如选择安装路径、添加桌面快捷方式等。</li>
<li><code>cloudflared-windows-amd64.msi</code> 文件可能是 Cloudflared 工具的安装程序，通过运行这个文件，您可以按照安装向导的指示在 Windows 系统上安装 Cloudflared 工具。</li>
</ul>
<ol start="2">
<li><strong>cloudflared-windows-amd64.exe</strong>:</li>
</ol>
<ul>
<li><code>.exe</code> 文件是 Windows 可执行文件的常见扩展名，它们通常是独立的可执行程序。当您运行一个 <code>.exe</code> 文件时，它会直接执行其中的程序代码，而无需通过安装向导。</li>
<li><code>cloudflared-windows-amd64.exe</code> 文件可能是 Cloudflared 工具的独立可执行文件。通过运行这个文件，您可以直接启动 Cloudflared 工具，而无需进行安装过程。</li>
</ul>
<p>因此，如果您想要安装 Cloudflared 工具并在系统中进行设置，您可以选择运行 <code>.msi</code> 文件以启动安装向导。如果您只是想要快速运行 Cloudflared 工具而不需安装，您可以选择运行 <code>.exe</code> 文件。</p>
</blockquote>
<h3 id="操作-1"><a href="#操作-1" class="headerlink" title="操作"></a>操作</h3><p>首先穿透的时候不是使用网页版的，而是使用本地配置文件的方式进行（跟以上<a href="#%E6%8C%87%E4%BB%A4%E7%89%88">指令版</a>很像），首先建议<a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">配一下环境变量</a>（如果你知道如何操作的话不配也行），然后打开命令窗口输入以下命令进行授权操作</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared login</span><br></pre></td></tr></table></figure>

<p>完成授权之后会在 <code>C:\Users\%USERNAME%\.cloudflared</code> 目录中生成登录凭证，之后才可以进行后续的操作</p>
<p>创建隧道（<code>&lt;NAME&gt;</code> 处写上隧道名）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel create &lt;NAME&gt;</span><br></pre></td></tr></table></figure>

<p>创建隧道完成还是会在 <code>C:\Users\%USERNAME%\.cloudflared</code> 目录下生成隧道的凭据是一个名是UUID的json文件</p>
<p>然后配置穿透需要的域名</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel route dns &lt;隧道ID&gt; &lt;域名&gt;</span><br></pre></td></tr></table></figure>

<p>隧道ID就是生成的UUID，域名是二级域名，建议使用泛解析，可以不需要重复的进行域名绑定操作如：<code>*.xxx.com</code></p>
<p>然后编写配置文件，在你存放exe程序的文件夹中创建一个 <code>config.yaml</code> 文件，然后开始编辑内容，如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 隧道的标识 - UUID</span></span><br><span class="line"><span class="attr">tunnel:</span> <span class="string">隧道的UUID</span></span><br><span class="line"><span class="comment"># 隧道的凭据</span></span><br><span class="line"><span class="attr">credentials-file:</span> <span class="string">C:\Users\用户名\.cloudflared\隧道凭据.json</span></span><br><span class="line"><span class="comment"># 穿透的内容 - 可以有多个</span></span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="comment"># 服务1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">fw1.xxx.top</span> <span class="comment"># 域名</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">http://localhost:8080</span> <span class="comment"># 本机服务</span></span><br><span class="line">  <span class="comment"># 服务2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">fw2.xxx.top</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">http://localhost:9527</span></span><br><span class="line">  <span class="comment"># 默认错误404 - 一定要有这个 - 最后一个入口规则必须是与所有流量匹配的 catch-all 规则</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">service:</span> <span class="string">http_status:404</span></span><br></pre></td></tr></table></figure>

<p>对上面的配置按照提示进行修改，在上面的服务中域名有fw1和fw2两个甚至可能更多，配置一个域名的泛解析之后会非常方便的进行穿透不需要一直进行创建DNS记录，但是也有一个弊端就是如果二级域名重复会导致冲突</p>
<blockquote>
<p>在编写这种 <code>yaml</code> 格式的文件需要注意缩进</p>
</blockquote>
<h3 id="启用穿透"><a href="#启用穿透" class="headerlink" title="启用穿透"></a>启用穿透</h3><p>创建一个cmd文件如：<code>开启穿透.cmd</code>，对文件继续编辑，输入以下内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared --config=D:\cloudflared\config.yaml tunnel run</span><br></pre></td></tr></table></figure>

<p>其中 <code>--config=</code> 后面的内容写上配置文件的全路径然后保存，最后双击文件即可开始穿透</p>
<h3 id="速度"><a href="#速度" class="headerlink" title="速度"></a>速度</h3><p>在DNS中有泛解析的一条数据，这条数据默认是开启DNS代理的，这个建议不要关，因为关闭的话链接超时的概率会非常大，这是开启的情况下进行 ping 10次的速度</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping xxx.ximuliunian.top [172.67.178.240] 具有 32 字节的数据:</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=193ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=209ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=191ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=189ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=192ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=186ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=185ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=185ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=193ms TTL=1</span><br><span class="line">来自 172.67.178.240 的回复: 字节=32 时间=197ms TTL=1</span><br><span class="line"></span><br><span class="line">172.67.178.240 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 10，已接收 = 10，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 185ms，最长 = 209ms，平均 = 192ms</span><br></pre></td></tr></table></figure>

<h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><p><strong>创建隧道</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel create &lt;tunnel_name&gt;</span><br></pre></td></tr></table></figure>

<p>通过此命令可以创建一个新的隧道，<code>&lt;tunnel_name&gt;</code> 是您为隧道指定的名称。</p>
<p><strong>启动隧道</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel run &lt;tunnel_name&gt;</span><br></pre></td></tr></table></figure>

<p>使用此命令可以启动指定名称的隧道。</p>
<p><strong>停止隧道</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel stop &lt;tunnel_name&gt;</span><br></pre></td></tr></table></figure>

<p>通过此命令可以停止运行中的隧道。</p>
<p><strong>删除隧道</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel delete &lt;tunnel_name&gt;</span><br></pre></td></tr></table></figure>

<p>使用此命令可以删除指定的隧道。</p>
<p><strong>列出隧道</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel list</span><br></pre></td></tr></table></figure>

<p>该命令可以列出所有已创建的隧道。</p>
<p><strong>查看隧道状态</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared.exe tunnel status &lt;tunnel_name&gt;</span><br></pre></td></tr></table></figure>

<p>通过此命令可以查看特定隧道的状态信息。</p>
<h2 id="特殊"><a href="#特殊" class="headerlink" title="特殊"></a>特殊</h2><p>像是 <code>tcp/rdp/ssh/smb</code> 这一类的协议，是需要端对端的支持，什么意思呢，就是你是对Linux进行的内网穿透，你想要在Windows上进行ssh或者tcp的使用就需要在Windows上面下载一个cloudflared软件供使用，找到适合的版本下载</p>
<p>下载链接：<a target="_blank" rel="noopener" href="https://github.com/cloudflare/cloudflared/releases">https://github.com/cloudflare/cloudflared/releases</a></p>
<p>然后在cloudflared软件路径上进行cmd，运行<code>cloudflared -v</code>看看是否能正常输出版本号，能的话就可以对其及进行操作了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/9.png"></p>
<p>比如我内穿了22端口到网址上那么就要在本地进行端口映射</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/10.png"></p>
<p>还是在然后在cloudflared软件路径上进行cmd，输入以下内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#样品</span></span><br><span class="line">cloudflared access 协议 --hostname 网址 --url 127.0.0.1:端口</span><br><span class="line"><span class="comment">#例子</span></span><br><span class="line">cloudflared access ssh --hostname test.ximuliunian.top --url 127.0.0.1:9527</span><br></pre></td></tr></table></figure>

<p>出现下图中则代表把网址映射到本地的<code>9527</code>端口，因为映射的是Linux的ssh远程，所以可以通过ssh软件尝试连接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/11.png"></p>
<p>可以看到，在本地的<code>9527</code>已经被映射到本地了，并且也可以被访问，</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/12.png"></p>
<p>同理，其他特殊协议也是这样的，就如我的世界服务器，在Linux上面开设服务器在Linux的25565端口正常开放，通过内网穿透映射到网址上，在通过上面这一串指令映射到本地，就可以进行连接</p>
<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>但是他要一直运行着那个黑窗口才能正常进行本地映射，那有没有什么方法可以没有这个黑窗口但是也能保持映射状态呢？</p>
<p>YOU！！！</p>
<p>通过我的绞尽脑汁的思考，突然灵光一现，<code>Windows服务</code>这个词出现在了我的脑海中，既然服务实在后台开着呢，那我是不是也可以进行保持映射状态呢，想到这里我就去试了一试，不出我所料，果然可以，然后通过着进行了c语言的脚本编写最终写完了</p>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>可以把下载的软件和cloudflared软件这两放在一个文件夹里面</p>
<p>使用软件有一个前提，那就是要使用管理员的方式打开文件，否则无法打开（可以右键软件 -&gt; 点击属性 -&gt; 点击上面的兼容性一栏 -&gt; 勾选以管理员身份运行此程序）</p>
<blockquote>
<p>要把cloudflared软件配置到环境变量里面（右键此电脑 -&gt; 属性 -&gt; 高级系统设置 -&gt; 环境变量 -&gt; 系统变量 -&gt; 在里面找到<code>Path</code>这条数据进入）</p>
</blockquote>
<p>然后把cloudflared软件的路径复制到上面去（比如文件夹A里面就有cloudflared软件，那么从文件夹A开始包括A往上到盘符的路径复制下来），然后点击环境变量里面的新建，把路径复制到上面去</p>
<p>如何判断环境变量是否配置成功了，在任何地方cmd然后输入<code>cloudflared -v</code>都可以输出信息那么就是配置成功了</p>
<p>使用软件（我自己写的）会产生一个文件<code>config</code>这个文件里面存放的是服务的信息，万万不可删除，有时也会有一个<code>temp</code>的文件出现，这个文件也不要删，切记！切记！切记！！！</p>
<h4 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h4><p><a target="_blank" rel="noopener" href="https://file-1.ximuliunian.top/%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.exe">点击下载</a></p>
<h4 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">adds</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">removes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">view</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">qidong</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">guanbi</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">IsProcessRunAsAdmin</span><span class="params">()</span> &#123;</span><br><span class="line">    SID_IDENTIFIER_AUTHORITY NtAuthority = SECURITY_NT_AUTHORITY;</span><br><span class="line">    PSID AdministratorsGroup;</span><br><span class="line">    BOOL b = AllocateAndInitializeSid(</span><br><span class="line">            &amp;NtAuthority,</span><br><span class="line">            <span class="number">2</span>,</span><br><span class="line">            SECURITY_BUILTIN_DOMAIN_RID,</span><br><span class="line">            DOMAIN_ALIAS_RID_ADMINS,</span><br><span class="line">            <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">            &amp;AdministratorsGroup);</span><br><span class="line">    <span class="keyword">if</span> (b) &#123;</span><br><span class="line">        CheckTokenMembership(<span class="literal">NULL</span>, AdministratorsGroup, &amp;b);</span><br><span class="line">        FreeSid(AdministratorsGroup);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b == TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!IsProcessRunAsAdmin()) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;请以管理员身份打开&quot;</span>);</span><br><span class="line">        Sleep(<span class="number">3000</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">&quot;title 曦暮流年 - 端口映射&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t##########################\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t#                        #\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t#      曦 暮 流 年       #\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t#      端 口 映 射       #\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t#                        #\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t##########################\n\n\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t1. 增加服务\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t2. 删除服务\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t3. 查看服务\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t4. 启用服务\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t5. 关闭服务\n&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t0. 退出\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t作者博客：www.ximuliunian.top\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t请输入数字编号：&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (a) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                adds();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                removes();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                view();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                qidong();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                guanbi();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\t感谢使用 再见！&quot;</span>);</span><br><span class="line">                Sleep(<span class="number">2000</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                system(<span class="string">&quot;CLS&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\t输入的不是应有的编号哦~~~\n&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\t请重新输入\n\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">adds</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE *fp = fopen(<span class="string">&quot;config&quot;</span>, <span class="string">&quot;a+&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">char</span> ServiceName[<span class="number">300</span>];</span><br><span class="line">    <span class="type">char</span> access[<span class="number">50</span>];</span><br><span class="line">    <span class="type">char</span> hostname[<span class="number">200</span>];</span><br><span class="line">    <span class="type">char</span> url[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\n\t请输入服务名字：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, ServiceName);</span><br><span class="line">    <span class="type">char</span> tempName[<span class="number">300</span>] = <span class="string">&quot;AAA_XMLN_&quot;</span>;</span><br><span class="line">    <span class="built_in">strcat</span>(tempName, ServiceName);</span><br><span class="line">    <span class="built_in">strcpy</span>( ServiceName,tempName);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入类型（tcp/rdp/ssh/smb）：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, access);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入映射网址：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, hostname);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入被映射的端口（如：25565）127.0.0.1:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, url);</span><br><span class="line">    <span class="built_in">fprintf</span>(fp, <span class="string">&quot;\n%s %s %s %s&quot;</span>, ServiceName, access, hostname, url);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> sc[<span class="number">1024</span>] = <span class="string">&quot;sc create &quot;</span>;</span><br><span class="line">    <span class="type">char</span> qd[<span class="number">100</span>] = <span class="string">&quot;net start &quot;</span>;</span><br><span class="line">    <span class="built_in">strcat</span>(qd, ServiceName);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, ServiceName);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, <span class="string">&quot; binPath= \&quot;cmd.exe /c cloudflared access &quot;</span>);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, access);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, <span class="string">&quot; --hostname &quot;</span>);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, hostname);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, <span class="string">&quot; --url 127.0.0.1:&quot;</span>);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, url);</span><br><span class="line">    <span class="built_in">strcat</span>(sc, <span class="string">&quot;\&quot; start= auto&quot;</span>);</span><br><span class="line">    system(sc);</span><br><span class="line">    system(qd);</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">removes</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> j = view();</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入删除序号：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">    FILE *ffp = fopen(<span class="string">&quot;config&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    FILE *fp = fopen(<span class="string">&quot;temp&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span> || ffp == <span class="literal">NULL</span> || a &lt;= <span class="number">0</span> || a &gt; j) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">char</span> sc[] = <span class="string">&quot;sc delete &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; !feof(ffp); ++i) &#123;</span><br><span class="line">        <span class="type">char</span> f[<span class="number">4</span>][<span class="number">100</span>];</span><br><span class="line">        <span class="built_in">fscanf</span>(ffp, <span class="string">&quot;%s %s %s %s&quot;</span>, f[<span class="number">0</span>], f[<span class="number">1</span>], f[<span class="number">2</span>], f[<span class="number">3</span>]);</span><br><span class="line">        <span class="keyword">if</span> (i == a) &#123;</span><br><span class="line">            <span class="built_in">strcpy</span>(name, f[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp, <span class="string">&quot;\n%s %s %s %s&quot;</span>, f[<span class="number">0</span>], f[<span class="number">1</span>], f[<span class="number">2</span>], f[<span class="number">3</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcat</span>(sc, name);</span><br><span class="line">    system(sc);</span><br><span class="line">    fclose(fp);</span><br><span class="line">    fclose(ffp);</span><br><span class="line">    system(<span class="string">&quot;del config&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;ren temp config&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">view</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;CLS&quot;</span>);</span><br><span class="line">    FILE *fp = fopen(<span class="string">&quot;config&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\n\t序号\t服务名字\t类型\t映射网址\t被映射端口\n\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (!feof(fp)) &#123;</span><br><span class="line">        <span class="type">char</span> a[<span class="number">4</span>][<span class="number">100</span>];</span><br><span class="line">        <span class="built_in">fscanf</span>(fp, <span class="string">&quot;%s %s %s %s&quot;</span>, a[<span class="number">0</span>], a[<span class="number">1</span>], a[<span class="number">2</span>], a[<span class="number">3</span>]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t%d\t&quot;</span>, j++);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s\t&quot;</span>, a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">kg</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> j, <span class="type">char</span> sc[])</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">qidong</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> j = view();</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入序号：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">    kg(a, j, <span class="string">&quot;net start &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">guanbi</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> j = view();</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t请输入序号：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">    kg(a, j, <span class="string">&quot;net stop &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">kg</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> j, <span class="type">char</span> sc[])</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="type">char</span> sp[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">strcpy</span>(sp, sc);</span><br><span class="line">    FILE *ffp = fopen(<span class="string">&quot;config&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (ffp == <span class="literal">NULL</span> || a &lt;= <span class="number">0</span> || a &gt; j) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; !feof(ffp); ++i) &#123;</span><br><span class="line">        <span class="type">char</span> f[<span class="number">5</span>][<span class="number">100</span>];</span><br><span class="line">        <span class="built_in">fscanf</span>(ffp, <span class="string">&quot;%s %s %s %s %s&quot;</span>, f[<span class="number">0</span>], f[<span class="number">1</span>], f[<span class="number">2</span>], f[<span class="number">3</span>], f[<span class="number">4</span>]);</span><br><span class="line">        <span class="keyword">if</span> (i == a) &#123;</span><br><span class="line">            <span class="built_in">strcpy</span>(name, f[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcat</span>(sp, name);</span><br><span class="line">    system(sp);</span><br><span class="line">    fclose(ffp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">曦暮流年</div><div class="post-copyright__author_desc">偷懒是进步的动力</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/')">cloudflared内网穿透</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/shoukuan/weixin.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/weixin.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/shoukuan/zhifubao.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/zhifubao.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=cloudflared内网穿透&amp;url=https://www.ximuliunian.top/2023/09/27/%E9%9A%8F%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/&amp;pic=https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/3.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.ximuliunian.top" target="_blank">曦暮流年</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>工具<span class="tagsPageCount">10</span></a><a class="post-meta__box__tags" href="/tags/%E5%91%BD%E4%BB%A4/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>命令<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/CentOS-7/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>CentOS 7<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/C%E8%AF%AD%E8%A8%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>C语言<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/%E8%84%9A%E6%9C%AC/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>脚本<span class="tagsPageCount">4</span></a><a class="post-meta__box__tags" href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>内网穿透<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/cloudflare/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>cloudflare<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-1-27/6.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/27/java/%E4%BD%BF%E7%94%A8Java%E8%BF%9B%E8%A1%8Cjson%E7%9A%84%E8%AF%BB%E5%8F%96%E4%BA%8E%E5%86%99%E5%85%A5/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">使用Java进行json的读取于写入</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/12/%E5%89%8D%E7%AB%AF/%E6%97%A5%E5%8E%86%E5%B0%8F%E6%A1%88%E4%BE%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/4.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">日历小案例</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/08/28/Git/Git%E5%91%BD%E4%BB%A4/" title="Git常用命令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-1-27/3.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-28</div><div class="title">Git常用命令</div></div></a></div><div><a href="/2023/01/30/linux/CentOS7%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/" title="CentOS7系统安装"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/文章/linux/CentOS7系统安装/略缩图.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-30</div><div class="title">CentOS7系统安装</div></div></a></div><div><a href="/2023/02/16/%E9%9A%8F%E8%AE%B0/Rewards%E5%88%B7%E7%A7%AF%E5%88%86%E8%84%9A%E6%9C%AC/" title="Rewards刷积分脚本"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/12.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-02-16</div><div class="title">Rewards刷积分脚本</div></div></a></div><div><a href="/2022/08/28/Git/Git%E7%AE%80%E4%BB%8B/" title="Git简介"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/文章/Git/简介/静宜夕阳.gif" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-28</div><div class="title">Git简介</div></div></a></div><div><a href="/2023/06/24/java/FastJson/" title="FastJson"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-3-4/15.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-06-24</div><div class="title">FastJson</div></div></a></div><div><a href="/2023/06/21/java/maven%E5%AE%89%E8%A3%85/" title="maven安装与配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-3-4/13.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-06-21</div><div class="title">maven安装与配置</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/%5Cimg%5Csystem%5Cbqb.png" alt="status"/></div></div><div class="author-info__description">顺境不惰，逆境不妥，以心制境，万事可成</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">曦暮流年</h1><div class="author-info__desc">偷懒是进步的动力</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/ximuliunian" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1304924540" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Cloudflared-Zero-Trust"><span class="toc-number">1.</span> <span class="toc-text">Cloudflared Zero Trust</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E7%89%88"><span class="toc-number">3.</span> <span class="toc-text">网页版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.1.</span> <span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.</span> <span class="toc-text">操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E7%89%88"><span class="toc-number">4.</span> <span class="toc-text">指令版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">4.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81"><span class="toc-number">4.2.</span> <span class="toc-text">身份认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA-Tunnel"><span class="toc-number">4.3.</span> <span class="toc-text">新建 Tunnel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEDNS%E8%AE%B0%E5%BD%95"><span class="toc-number">4.4.</span> <span class="toc-text">配置DNS记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.1.</span> <span class="toc-text">网站配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.2.</span> <span class="toc-text">指令配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-number">4.5.</span> <span class="toc-text">配置文件编写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C-Tunnel"><span class="toc-number">4.6.</span> <span class="toc-text">执行 Tunnel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.7.</span> <span class="toc-text">服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.7.1.</span> <span class="toc-text">安装服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.7.2.</span> <span class="toc-text">启动服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6OK"><span class="toc-number">4.8.</span> <span class="toc-text">查看是否OK</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windows%E4%BD%BF%E7%94%A8"><span class="toc-number">5.</span> <span class="toc-text">Windows使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C-1"><span class="toc-number">5.1.</span> <span class="toc-text">操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E7%A9%BF%E9%80%8F"><span class="toc-number">5.2.</span> <span class="toc-text">启用穿透</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9F%E5%BA%A6"><span class="toc-number">5.3.</span> <span class="toc-text">速度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">常用指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A"><span class="toc-number">7.</span> <span class="toc-text">特殊</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-number">7.1.</span> <span class="toc-text">脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">7.1.1.</span> <span class="toc-text">注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-1"><span class="toc-number">7.1.2.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E7%A0%81"><span class="toc-number">7.1.3.</span> <span class="toc-text">源码</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91%E4%B8%8EB+%E6%A0%91/" title="B树与B+树"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-1-27/6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="B树与B+树"/></a><div class="content"><a class="title" href="/2024/09/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/B%E6%A0%91%E4%B8%8EB+%E6%A0%91/" title="B树与B+树">B树与B+树</a><time datetime="2024-09-21T00:00:00.000Z" title="发表于 2024-09-21 00:00:00">2024-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/26/%E5%B7%A5%E5%85%B7/NVM/" title="NVM"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-2-4/2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVM"/></a><div class="content"><a class="title" href="/2024/06/26/%E5%B7%A5%E5%85%B7/NVM/" title="NVM">NVM</a><time datetime="2024-06-26T00:00:00.000Z" title="发表于 2024-06-26 00:00:00">2024-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/05/09/%E4%BA%91%E7%9B%98/123%E4%BA%91%E7%9B%98API%E5%B0%81%E8%A3%85/" title="123云盘API封装"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-2-4/13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="123云盘API封装"/></a><div class="content"><a class="title" href="/2024/05/09/%E4%BA%91%E7%9B%98/123%E4%BA%91%E7%9B%98API%E5%B0%81%E8%A3%85/" title="123云盘API封装">123云盘API封装</a><time datetime="2024-05-09T17:11:12.000Z" title="发表于 2024-05-09 17:11:12">2024-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/14/%E7%AE%97%E6%B3%95/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95/" title="滑动窗口"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="滑动窗口"/></a><div class="content"><a class="title" href="/2023/11/14/%E7%AE%97%E6%B3%95/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95/" title="滑动窗口">滑动窗口</a><time datetime="2023-11-14T19:57:00.000Z" title="发表于 2023-11-14 19:57:00">2023-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/12/%E5%89%8D%E7%AB%AF/%E6%97%A5%E5%8E%86%E5%B0%8F%E6%A1%88%E4%BE%8B/" title="日历小案例"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://vip.123pan.cn/1816073777/blog-img/壁纸/2023-4-13/4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="日历小案例"/></a><div class="content"><a class="title" href="/2023/10/12/%E5%89%8D%E7%AB%AF/%E6%97%A5%E5%8E%86%E5%B0%8F%E6%A1%88%E4%BE%8B/" title="日历小案例">日历小案例</a><time datetime="2023-10-12T17:19:51.000Z" title="发表于 2023-10-12 17:19:51">2023-10-12</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:a3436528385@outlook.com" title="email"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjian"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1304924540" title="Bilibili"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="deal_link" href="tencent://Message/?Uin=2515550574&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" title="QQ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/ximuliunian" title="Github"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://t.me/xm_ln" title="Telegram"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://twitter.com/xi_mu_liu_nian" title="Twitter"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter"></use></svg></a></div><div class="copyright">&copy;2022 - 2024 By 曦暮流年</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.ximuliunian.top/" title="主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="主页"/><span class="back-menu-item-text">主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.ximuliunian.top" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://nav.ximuliunian.top" title="导航栏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="导航栏"/><span class="back-menu-item-text">导航栏</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gpt.ximuliunian.top" title="GPT"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GPT"/><span class="back-menu-item-text">GPT</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-huidang"></use></svg><span> 回档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 下载</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/Download/Windows.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pcduandiannao"></use></svg><span> PC端</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Download/Android.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouji"></use></svg><span> 移动端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wallpaper/TuPian.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bianpingbizhi"></use></svg><span> 壁纸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/geren/ghjs.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-ghjs"></use></svg><span> github加速</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 0.88rem;">API<sup>1</sup></a><a href="/tags/B-%E6%A0%91/" style="font-size: 0.88rem;">B+树<sup>1</sup></a><a href="/tags/BFC/" style="font-size: 0.88rem;">BFC<sup>1</sup></a><a href="/tags/B%E6%A0%91/" style="font-size: 0.88rem;">B树<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 0.88rem;">CSS<sup>1</sup></a><a href="/tags/CentOS-7/" style="font-size: 0.88rem;">CentOS 7<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/SSH/" style="font-size: 0.88rem;">SSH<sup>1</sup></a><a href="/tags/Tree/" style="font-size: 0.88rem;">Tree<sup>1</sup></a><a href="/tags/URL/" style="font-size: 0.88rem;">URL<sup>1</sup></a><a href="/tags/bat/" style="font-size: 0.88rem;">bat<sup>1</sup></a><a href="/tags/cloudflare/" style="font-size: 0.88rem;">cloudflare<sup>2</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>4</sup></a><a href="/tags/office/" style="font-size: 0.88rem;">office<sup>1</sup></a><a href="/tags/%E4%BA%91%E7%9B%98/" style="font-size: 0.88rem;">云盘<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 0.88rem;">代码<sup>6</sup></a><a href="/tags/%E4%BF%AE%E6%94%B9/" style="font-size: 0.88rem;">修改<sup>1</sup></a><a href="/tags/%E5%85%83%E7%B4%A0/" style="font-size: 0.88rem;">元素<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 0.88rem;">内网穿透<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>2</sup></a><a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">命令<sup>2</sup></a><a href="/tags/%E5%B0%8F%E5%AE%9E%E4%BE%8B/" style="font-size: 0.88rem;">小实例<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">小知识<sup>9</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>10</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF/" style="font-size: 0.88rem;">微软<sup>1</sup></a><a href="/tags/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" style="font-size: 0.88rem;">报错解决方法<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%8E%86/" style="font-size: 0.88rem;">日历<sup>1</sup></a><a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 0.88rem;">注释<sup>1</sup></a><a href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" style="font-size: 0.88rem;">游览器<sup>2</sup></a><a href="/tags/%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">版本工具<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>2</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">系统<sup>2</sup></a><a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 0.88rem;">编辑器<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%9B%98/" style="font-size: 0.88rem;">网盘<sup>1</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 0.88rem;">网页<sup>1</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 0.88rem;">脚本<sup>4</sup></a><a href="/tags/%E9%82%AE%E7%AE%B1/" style="font-size: 0.88rem;">邮箱<sup>1</sup></a><a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 0.88rem;">链接<sup>1</sup></a><a href="/tags/%E9%AB%98%E4%BA%AE/" style="font-size: 0.88rem;">高亮<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("21/01/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      "-----------------------------------"
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 曦暮流年 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="/js/iconfont.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>