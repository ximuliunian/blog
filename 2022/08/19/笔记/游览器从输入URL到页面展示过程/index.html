<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>游览器从输入URL到页面展示过程 | 曦暮流年</title><meta name="keywords" content="URL,DNS解析,TCP连接,HTTP/HTTPS"><meta name="author" content="曦暮流年"><meta name="copyright" content="曦暮流年"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="游览器从输入URL到页面展示过程"><meta name="application-name" content="游览器从输入URL到页面展示过程"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="游览器从输入URL到页面展示过程"><meta property="og:url" content="https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/index.html"><meta property="og:site_name" content="曦暮流年"><meta property="og:description" content="在游览器从你点你按钮的哪一个后台在干什么"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://img.ximuliunian.top/壁纸/2023-2-4/8.png"><meta property="article:author" content="曦暮流年"><meta property="article:tag" content="博客,曦暮流年,曦暮,流年,ximuliunian,blog"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.ximuliunian.top/壁纸/2023-2-4/8.png"><meta name="description" content="在游览器从你点你按钮的哪一个后台在干什么"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;906dd30782494835be66cd14f401c890&quot;}"></script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 曦暮流年","link":"链接: ","source":"来源: 曦暮流年","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '曦暮流年',
  title: '游览器从输入URL到页面展示过程',
  postAI: '',
  pageFillDescription: '前言, 游览器从输入URL到页面展示主要经过七个过程, 输入 URL, DNS 解析, 详细过程, 建立 TCP 连接, TCP 三次握手, 为什么 TCP 采用三次握手 两次不行吗?, 发送 HTTP x2F HTTPS 请求, 服务器响应请求, 游览器解析渲染页面, HTTP 请求结束断开 TCP 连接, TCP 四次挥手过程, 为什么建立连接握手三次关闭连接时需要四次呢?, 互联网 | 因特网 | 万维网 关系图前言在使用游览器的时候只要在游览器的地址栏中输入网址就会进入相应的网站他是如何进入网站的期间到底发生了什么呢和到底有什么区别又是什么连接等等等等游览器从输入到页面展示主要经过七个过程输入解析建立连接发送请求服务器响应请求游览器解析渲染页面请求结束断开连接输入全称统一资源定位符用于定位互联网上的资源俗称网址我们在地址栏输入网址后敲击回车游览器会对输入信息进行判断检查输入内容是否是一个合法的连接如果合法则判断输入的是否完整如果不完整游览器可能会对地址进行猜测补全地址的前缀或者后缀如果不合法将输入内容作为搜索条件使用用户设置的默认搜索引擎来进行搜索现在大部分游览器都会从历史记录书签等地方开始查找我们输入的网址并给出智能提示解析因为游览器不能直接通过域名找到对应的服务器地址所以需要进行解析查找到对应的地址进行访问详细过程用户在游览器中输入域名操作系统会检查游览器缓存和本地的文件中是否有这个网址的记录有的话就从记录里面找到对应的地址完成域名解析没有的话再接着使用参数中的设置的服务器进行查询如果要查询的域名包含在本地配置区域资源中则返回结果完成域名解析还没有的话再接着查本地服务器是否缓存有该网址记录有的话就返回解析结果完成域名解析如果还没有的话本地服务器会发送查询报文到根服务器根服务器收到请求后返回顶级域服务器地址然后本地服务器发送查询报文到顶级域服务器顶级域服务器收到请求后返回权威服务器地址然后本地服务器再发送查询报文到权威服务器权威服务器收到请求后返回最终的地址完成域名解析报文就是在各个系统之间进行请求和响应时用来交换信息的还需要遵守规定好的格式更详细的请自行度娘建立连接当游览器获取到服务器地址后游览器会用一个随机的端口号向服务器端口发起连接请求这个连接请求到达服务端后通过三次握手建立的连接三次握手其实就是建立一个连接客户端与服务器交互需要个数据包握手的主要作用就是为了确认双方的接收和发送能力是否正常初始序列号交换窗口大小等信息如图所示第一次握手客户端给服务器发送一个报文并进入状态等待服务器的确认是同步的缩写段是发送到另一台计算机的数据包请求在它们之间建立连接第二次握手服务器收到报文需要给客户端发送确认报文同时服务器也要向客户端发送一个报文所以也就是向客户端发送报文此时服务器进入状态是确认的缩写数据包是任何确认收到一条消息或一系列数据包的数据包第三次握手客户端收到报文向服务器发送确认包客户端进入状态待服务器收到客户端发送的包也会进入状态完成三次握手状态是表示两台机器正在传输数据更详细的请自行度娘为什么采用三次握手两次不行吗主要因为以下几点原因确认双方的收发能力建立连接之前需要确认客户端与服务器双方的收包和发包的能力第一次握手客户端发送网络包服务端收到了这样服务端就能得出结论客户端的发送能力服务端的接收能力是正常的第二次握手服务端发包客户端收到了这样客户端就能得出结论服务器的接收发送能力客户端的接收发送能力是正常的不过此时服务器并不能确认客户端的接收能力是否正常第三次握手客户端发包服务端收到了这样服务端就能得出结论客户端的接收发送能力是正常服务器自己的发送接收能力正常所以只有三次握手才能确认双方的接收与发送能力是否正常确认序列号可靠同步如果是两次握手服务端无法确定客户端是否已经接收到了自己发送的初始序列号如果第二次握手报文丢失那么客户端就无法知道服务端的初始序列号那么的可靠性就无从谈起了阻止重复历史连接的初始化客户端由于某种原因发送了两个不同序号的包我们知道网络环境是复杂的旧的数据包有可能先到达服务器如果是两次握手服务器收到旧的就会立刻建立连接那么就会造成网络异常如果是三次握手服务器需要回复包客户端会对比应答的序号如果发现是旧的报文就会给服务器发报文直到正常的到达服务器后才正常连接用于复位因某种原因引起出现的错误连接也用来拒绝非法数据和请求如果接收到位时候通常发生了某些错误所以三次握手才有足够的上下文信息来判断当前连接是否是历史连接安全问题新建连接时内核会为连接分配一系列的内存资源如果采用两次握手就建立连接那会放大攻击作为一种可靠的传输控制协议其核心思想是既要保证数据可靠传输又要提高传输的效率而三次握手恰好可以满足以上两方面的需求发送请求建立连接后就可以通过进行数据传输如果使用会在与之间多添加一层协议作为加密及认证的服务使用量和协议保障了信息的安全协议的作用是认证客户端和服务器确保数据发送到正确的客户端和服务器加密数据防止数据中途被窃取维护数据的完整性确保数据在传输过程中不被改变协议的作用是用于在两个通信应用程序之间提供保密性和数据完整性协议有两层组成记录协议和握手协议服务器响应请求当游览器到服务器的连接建立后游览器会发送一个初始的请求请求目标通常是一个文件服务器收到请求后将发回一个响应报文内容包括相关响应头和正文游览器解析渲染页面当游览器收到服务器响应后开始解析并渲染页面不同的游览器引擎渲染过程不太一样以谷歌为例处理标记并构建树处理标记并构建树将树与树合并成一个渲染树根据渲染树来布局以计算每个节点的几何信息将各个节点渲染到屏幕上这样就完成了页面渲染请求结束断开连接渲染完成之后就可以断开连接了现在的游览器页面为了优化请求的耗时默认都会开启持久连接也就是说标签页关闭的时候连接才会关闭这个关闭的过程就是四次挥手四次挥手过程当我们的应用程序不需要数据通信了就会发起断开连接建立一个连接需要三次握手而断开一个连接需要经过四次挥手如图所示第一次挥手客户端发起包客户端进入状态规定及时包不携带数据也要消耗一个序号表示关闭连接第二次挥手服务器端收到包发出确认包并带上自己的序号服务器端进入了状态这个时候客户端已经没有数据要发送了不过服务器端有数据发送的话客户端依然需要接收客户端收到服务器端发送到后进入了状态第三次挥手服务器端数据发送完毕后向客户端发送包半连接状态下服务器可能又发送了一些数据服务器此时进入了状态第四次挥手客户端收到服务器的包后发出确认包此时客户端进入了状态此时连接还没有释放必须经过两个后才会进入状态而服务器端收到客户端的确认包后就进入了状态可以看出服务器端结束连接的时间要比客户端早一些为什么建立连接握手三次关闭连接时需要四次呢握手的时候接收端发送的包是将一个和一个合并到一个包中所以减少了一次包的发送三次完成握手对于四次挥手因为是全双工通信在主动关闭方发送包后接收端可能还要发送数据不能立即关闭服务器端到客户端的数据通道所以也就不能将服务器端的包和对客户端的包合并发送智能先确认然后服务器等到无需发送数据时在发送包所以四次握手时必须是四次数据包的交互互联网因特网万维网关系图互联网因特网万维网',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-19 16:15:36',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/touxiang.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.ximuliunian.top/" title="主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="主页"/><span class="back-menu-item-text">主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.ximuliunian.top" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://nav.ximuliunian.top" title="导航栏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="导航栏"/><span class="back-menu-item-text">导航栏</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gpt.ximuliunian.top" title="GPT"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GPT"/><span class="back-menu-item-text">GPT</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">曦暮流年</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-huidang"></use></svg><span> 回档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 下载</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/Download/Windows.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pcduandiannao"></use></svg><span> PC端</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Download/Android.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouji"></use></svg><span> 移动端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wallpaper/TuPian.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bianpingbizhi"></use></svg><span> 壁纸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/geren/ghjs.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-ghjs"></use></svg><span> github加速</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/shoukuan/weixin.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/weixin.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/shoukuan/zhifubao.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/zhifubao.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 1.05rem;">API<sup>1</sup></a><a href="/tags/BFC/" style="font-size: 1.05rem;">BFC<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/CentOS-7/" style="font-size: 1.05rem;">CentOS 7<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>3</sup></a><a href="/tags/GitHub/" style="font-size: 1.05rem;">GitHub<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/SSH/" style="font-size: 1.05rem;">SSH<sup>1</sup></a><a href="/tags/URL/" style="font-size: 1.05rem;">URL<sup>1</sup></a><a href="/tags/bat/" style="font-size: 1.05rem;">bat<sup>1</sup></a><a href="/tags/cloudflare/" style="font-size: 1.05rem;">cloudflare<sup>2</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>5</sup></a><a href="/tags/office/" style="font-size: 1.05rem;">office<sup>1</sup></a><a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 1.05rem;">二叉树<sup>1</sup></a><a href="/tags/%E4%BA%91%E7%9B%98/" style="font-size: 1.05rem;">云盘<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 1.05rem;">代码<sup>7</sup></a><a href="/tags/%E4%BF%AE%E6%94%B9/" style="font-size: 1.05rem;">修改<sup>1</sup></a><a href="/tags/%E5%85%83%E7%B4%A0/" style="font-size: 1.05rem;">元素<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 1.05rem;">内网穿透<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>2</sup></a><a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">命令<sup>2</sup></a><a href="/tags/%E5%B0%8F%E5%AE%9E%E4%BE%8B/" style="font-size: 1.05rem;">小实例<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">小知识<sup>9</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>9</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF/" style="font-size: 1.05rem;">微软<sup>1</sup></a><a href="/tags/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" style="font-size: 1.05rem;">报错解决方法<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%8E%86/" style="font-size: 1.05rem;">日历<sup>1</sup></a><a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 1.05rem;">注释<sup>1</sup></a><a href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" style="font-size: 1.05rem;">游览器<sup>2</sup></a><a href="/tags/%E7%99%BD%E5%AB%96/" style="font-size: 1.05rem;">白嫖<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>3</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">系统<sup>2</sup></a><a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 1.05rem;">编辑器<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%9B%98/" style="font-size: 1.05rem;">网盘<sup>1</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 1.05rem;">网页<sup>1</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 1.05rem;">脚本<sup>4</sup></a><a href="/tags/%E9%82%AE%E7%AE%B1/" style="font-size: 1.05rem;">邮箱<sup>1</sup></a><a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 1.05rem;">链接<sup>1</sup></a><a href="/tags/%E9%AB%98%E4%BA%AE/" style="font-size: 1.05rem;">高亮<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>小知识</span></a><a class="article-meta__tags" href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>游览器</span></a><a class="article-meta__tags" href="/tags/%E7%BD%91%E9%A1%B5/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>网页</span></a><a class="article-meta__tags" href="/tags/URL/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>URL</span></a></span></div></div><h1 class="post-title" itemprop="name headline">游览器从输入URL到页面展示过程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-08-19T16:15:36.000Z" title="发表于 2022-08-19 16:15:36">2022-08-19</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2022-08-19T16:15:36.000Z" title="更新于 2022-08-19 16:15:36">2022-08-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为河南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>河南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://img.ximuliunian.top/壁纸/2023-2-4/8.png"></div></header><main id="blog-container"><div id="single_top"><div class="author-content author-content-item single" style="background: url(https://img.ximuliunian.top/壁纸/2023-2-4/8.png) top / cover no-repeat;"><div class="card-content"><div class="author-content-item-tips"></div><span class="author-content-item-title">游览器从输入URL到页面展示过程</span><div class="content-bottom"><div class="tips"></div></div><div class="banner-button-group"><a class="banner-button" onclick="pjax.loadUrl(&quot;/about&quot;)"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right" style="font-size: 1.5rem"></i><span class="banner-button-text">关于我</span></a></div></div></div></div><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/"><header><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a><a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" tabindex="-1" itemprop="url">小知识</a><a href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" tabindex="-1" itemprop="url">游览器</a><a href="/tags/%E7%BD%91%E9%A1%B5/" tabindex="-1" itemprop="url">网页</a><a href="/tags/URL/" tabindex="-1" itemprop="url">URL</a><h1 id="CrawlerTitle" itemprop="name headline">游览器从输入URL到页面展示过程</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">曦暮流年</span><time itemprop="dateCreated datePublished" datetime="2022-08-19T16:15:36.000Z" title="发表于 2022-08-19 16:15:36">2022-08-19</time><time itemprop="dateCreated datePublished" datetime="2022-08-19T16:15:36.000Z" title="更新于 2022-08-19 16:15:36">2022-08-19</time></header><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在使用游览器的时候,只要在游览器的地址栏中输入网址, 就会进入相应的网站</p>
<p>他是如何进入网站的,</p>
<p>期间到底发生了什么呢</p>
<p>https和http到底有什么区别,</p>
<p>DNS又是什么</p>
<p>TCP连接</p>
<p>等等等等……</p>
<h2 id="游览器从输入URL到页面展示主要经过七个过程"><a href="#游览器从输入URL到页面展示主要经过七个过程" class="headerlink" title="游览器从输入URL到页面展示主要经过七个过程"></a>游览器从输入URL到页面展示主要经过七个过程</h2><ol>
<li>URL 输入</li>
<li>DNS 解析</li>
<li>建立 TCP 连接</li>
<li>发送 HTTP &#x2F; HTTPS 请求</li>
<li>服务器响应请求</li>
<li>游览器解析渲染页面</li>
<li>HTTP 请求结束,断开 TCP 连接</li>
</ol>
<h3 id="输入-URL"><a href="#输入-URL" class="headerlink" title="输入 URL"></a>输入 URL</h3><p><strong>URL</strong>,全称: 统一资源定位符, 用于定位互联网上的资源 <strong>俗称网址</strong></p>
<p>我们在地址栏输入网址后敲击回车,游览器会对输入信息进行判断:</p>
<ol>
<li>检查输入内容是否是一个合法的 URL 连接</li>
<li>如果合法,则判断输入的 URL 是否完整;如果不完整,游览器可能会对地址进行猜测,补全地址的前缀或者后缀</li>
<li>如果不合法,将输入内容作为搜索条件,使用用户设置的默认搜索引擎来进行搜索</li>
</ol>
<p>现在大部分游览器都会从历史记录、书签等地方开始查找我们输入的网址,并给出智能提示</p>
<h3 id="DNS-解析"><a href="#DNS-解析" class="headerlink" title="DNS 解析"></a>DNS 解析</h3><p>因为游览器不能直接通过域名找到对应的服务器 IP 地址,所以需要进行 DNS 解析,查找到对应的 IP 地址进行访问</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/1.png"></p>
<h4 id="详细过程"><a href="#详细过程" class="headerlink" title="详细过程"></a><strong>详细过程</strong></h4><ol>
<li>用户在游览器中输入域名,操作系统会检查游览器缓存和本地的 <strong>hosts</strong> 文件中是否有这个网址的记录,有的话就从记录里面找到对应的 IP 地址,完成域名解析</li>
<li>没有的话再接着使用 TCP&#x2F;IP 参数中的设置的 DNS 服务器进行查询,如果要查询的域名包含在本地配置区域资源中,则返回结果,完成域名解析</li>
<li>还没有的话再接着查本地 DNS 服务器是否缓存有该网址记录,有的话就返回解析结果,完成域名解析</li>
<li>如果还没有的话, 本地 DNS 服务器会发送查询报文到根 DNS 服务器,根 DNS 服务器收到请求后, 返回顶级域 DNS 服务器地址,然后本地 DNS 服务器发送查询报文到顶级域 DNS 服务器, 顶级域 DNS 服务器收到请求后, 返回权威 DNS 服务器地址, 然后本地 DNS 服务器再发送查询报文到权威 DNS 服务器, 权威 DNS 服务器收到请求后, 返回最终的 IP 地址, 完成域名解析</li>
</ol>
<p><strong>报文就是在各个系统之间进行请求和响应时用来交换信息的,还需要遵守规定好的格式</strong></p>
<p>更详细的请自行度娘</p>
<h3 id="建立-TCP-连接"><a href="#建立-TCP-连接" class="headerlink" title="建立 TCP 连接"></a>建立 TCP 连接</h3><p>当游览器获取到服务器 IP 地址后,游览器会用一个随机的端口号向服务器 80 端口发起 TCP 连接请求<br>这个连接请求到达服务端后,通过 TCP 三次握手,建立 TCP 的连接</p>
<h4 id="TCP-三次握手"><a href="#TCP-三次握手" class="headerlink" title="TCP 三次握手"></a><strong>TCP 三次握手</strong></h4><p>其实就是建立一个 TCP 连接,客户端与服务器交互需要 3 个数据包</p>
<p>握手的主要作用就是为了确认双方的接收和发送能力是否正常,初始序列号,交换窗口大小等信息</p>
<p>如图所示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/2.png"></p>
<ol>
<li>第一次握手<ul>
<li>客户端给服务器发送一个 SYN 报文,并进入 SYN_SENT 状态,等待服务器的确认</li>
<li><strong>SYN是同步的缩写，SYN 段是发送到另一台计算机的 TCP 数据包，请求在它们之间建立连接</strong></li>
</ul>
</li>
<li>第二次握手<ul>
<li>服务器收到 SYN 报文, 需要给客户端发送 ACK 确认报文,同时服务器也要向客户端发送一个 SYN 报文, 所以也就是向客户端发送 SYN + ACK 报文,此时服务器进入 SYN_RCVD 状态</li>
<li><strong>ACK 是“确认”的缩写。 ACK 数据包是任何确认收到一条消息或一系列数据包的 TCP 数据包</strong></li>
</ul>
</li>
<li>第三次握手<ul>
<li>客户端收到 SYN + ACK 报文,向服务器发送确认包,客户端进入 ESTABLISHED 状态,待服务器收到客户端发送的 ACK 包也会进入 ESTABLISHED 状态,完成三次握手</li>
<li><strong>ESTABLISHED 状态是表示两台机器正在传输数据</strong></li>
</ul>
</li>
</ol>
<p>更详细的请自行度娘</p>
<h4 id="为什么-TCP-采用三次握手-两次不行吗"><a href="#为什么-TCP-采用三次握手-两次不行吗" class="headerlink" title="为什么 TCP 采用三次握手 两次不行吗?"></a><strong>为什么 TCP 采用三次握手 两次不行吗?</strong></h4><p>主要因为以下几点原因</p>
<ol>
<li><p>确认双方的收发能力</p>
<ul>
<li>TCP 建立连接之前需要确认客户端与服务器双方的收包和发包的能力</li>
<li>第一次握手：客户端发送网络包,服务端收到了 这样服务端就能得出结论:客户端的发送能力、服务端的接收能力是正常的</li>
<li>第二次握手：服务端发包,客户端收到了 这样客户端就能得出结论:服务器的接收、发送能力,客户端的接收、发送能力是正常的 不过此时服务器并不能确认客户端的接收能力是否正常</li>
<li>第三次握手：客户端发包,服务端收到了 这样服务端就能得出结论:客户端的接收、发送能力是正常,服务器自己的发送、接收能力正常</li>
<li>所以，只有三次握手才能确认双方的接收与发送能力是否正常</li>
</ul>
</li>
<li><p>确认序列号可靠同步</p>
<ul>
<li>如果是两次握手,服务端无法确定客户端是否已经接收到了自己发送的初始序列号,如果第二次握手报文丢失,那么客户端就无法知道服务端的初始序列号,那么 TCP 的可靠性就无从谈起了</li>
</ul>
</li>
<li><p>阻止重复历史连接的初始化</p>
<ul>
<li>客户端由于某种原因发送了两个不同序号的 SYN 包,我们知道网络环境是复杂的,旧的数据包有可能先到达服务器 如果是两次握手,服务器收到旧的 SYN 就会立刻建立连接,那么就会造成网络异常</li>
<li>如果是三次握手,服务器需要回复 SYN + ACK 包,客户端会对比应答的序号,如果发现是旧的报文,就会给服务器发 RST 报文,直到正常的 SYN 到达服务器后才正常连接</li>
<li><strong>RST：（Reset the connection）用于复位因某种原因引起出现的错误连接，也用来拒绝非法数据和请求。如果接收到RST位时候，通常发生了某些错误</strong></li>
<li>所以三次握手才有足够的上下文信息来判断当前连接是否是历史连接</li>
</ul>
</li>
<li><p>安全问题</p>
<ul>
<li>TCP 新建连接时,内核会为连接分配一系列的内存资源,如果采用两次握手就建立连接,那会放大 DDOS 攻击</li>
<li>TCP 作为一种可靠的传输控制协议,其核心思想是既要保证数据可靠传输,又要提高传输的效率,而三次握手恰好可以满足以上两方面的需求</li>
</ul>
</li>
</ol>
<h3 id="发送-HTTP-HTTPS-请求"><a href="#发送-HTTP-HTTPS-请求" class="headerlink" title="发送 HTTP &#x2F; HTTPS 请求"></a>发送 HTTP &#x2F; HTTPS 请求</h3><p>建立连接后就可以通过 HTTP 进行数据传输</p>
<p>如果使用 HTTPS,会在 TCP 与 HTTP 之间多添加一层协议作为加密及认证的服务<br>HTTPS 使用量 SSL 和 TLS 协议,保障了信息的安全</p>
<p>SSL 协议的作用是,认证客户端和服务器,确保数据发送到正确的客户端和服务器,加密数据防止数据中途被窃取,维护数据的完整性,确保数据在传输过程中不被改变</p>
<p>TSL 协议的作用是,用于在两个通信应用程序之间提供保密性和数据完整性</p>
<p>TLS 协议有两层组成: TLS 记录协议和 TLS 握手协议</p>
<h3 id="服务器响应请求"><a href="#服务器响应请求" class="headerlink" title="服务器响应请求"></a>服务器响应请求</h3><p>当游览器到 web 服务器的连接建立后,游览器会发送一个初始的 HTTP GET 请求,请求目标通常是一个 HTML 文件</p>
<p>服务器收到请求后,将发回一个 HTTP 响应报文,内容包括相关响应头和 HTML 正文</p>
<h3 id="游览器解析渲染页面"><a href="#游览器解析渲染页面" class="headerlink" title="游览器解析渲染页面"></a>游览器解析渲染页面</h3><p>当游览器收到服务器响应后,开始解析并渲染页面</p>
<p>不同的游览器引擎渲染过程不太一样,以谷歌为例</p>
<ol>
<li>处理 HTML 标记并构建 DOM 树</li>
<li>处理 CSS 标记并构建 CSSOM 树</li>
<li>将 DOM树 与 CSSOM树 合并成一个渲染树</li>
<li>根据渲染树来布局,以计算每个节点的几何信息</li>
<li>将各个节点渲染到屏幕上,这样就完成了页面渲染</li>
</ol>
<h3 id="HTTP-请求结束-断开-TCP-连接"><a href="#HTTP-请求结束-断开-TCP-连接" class="headerlink" title="HTTP 请求结束,断开 TCP 连接"></a>HTTP 请求结束,断开 TCP 连接</h3><p>渲染完成之后就可以断开 TCP 连接了</p>
<p>现在的游览器页面为了优化请求的耗时,默认都会开启持久连接,也就是说,标签页关闭的时候 TCP 连接才会关闭,这个关闭的过程就是<strong>四次挥手</strong></p>
<h4 id="TCP-四次挥手过程"><a href="#TCP-四次挥手过程" class="headerlink" title="TCP 四次挥手过程"></a><strong>TCP 四次挥手过程</strong></h4><p>当我们的应用程序不需要数据通信了,就会发起断开 TCP 连接 建立一个连接需要三次握手,而断开一个连接需要经过四次挥手</p>
<p>如图所示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/%E6%96%87%E7%AB%A0/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/3.png"></p>
<ol>
<li><p>第一次挥手</p>
<ul>
<li>客户端发起 FIN 包,客户端进入 FIN_WAIT_1 状态, TCP 规定,及时 FIN 包不携带数据,也要消耗一个序号</li>
<li><strong>FIN表示关闭连接</strong></li>
</ul>
</li>
<li><p>第二次挥手</p>
<ul>
<li>服务器端收到 FIN 包,发出确认包 ACK , 并带上自己的序号,服务器端进入了 CLOSE_WAIT 状态, 这个时候客户端已经没有数据要发送了, 不过服务器端有数据发送的话,客户端依然需要接收, 客户端收到服务器端发送到 ACK 后,进入了 FIN_WAIT_2 状态</li>
</ul>
</li>
<li><p>第三次挥手</p>
<ul>
<li>服务器端数据发送完毕后,向客户端发送 FIN 包,半连接状态下服务器可能又发送了一些数据,服务器此时进入了 LAST_ACK 状态</li>
</ul>
</li>
<li><p>第四次挥手</p>
<ul>
<li>客户端收到服务器的 FIN 包后,发出确认包 ACK , 此时客户端进入了 TIME_WAIT 状态,此时 TCP 连接还没有释放, 必须经过两个 MSL 后,才会进入 CLOSED 状态, 而服务器端收到客户端的确认包 ACK 后就进入了 CLOSED 状态, 可以看出服务器端结束 TCP 连接的时间要比客户端早一些</li>
</ul>
</li>
</ol>
<h4 id="为什么建立连接握手三次-关闭连接时需要四次呢"><a href="#为什么建立连接握手三次-关闭连接时需要四次呢" class="headerlink" title="为什么建立连接握手三次,关闭连接时需要四次呢?"></a><strong>为什么建立连接握手三次,关闭连接时需要四次呢?</strong></h4><p>TCP 握手的时候,接收端发送 SYN + ACK 的包是将一个 ACK 和一个 SYN 合并到一个包中,所以减少了一次包的发送,三次完成握手</p>
<p>对于四次挥手,因为 TCP 是全双工通信, 在主动关闭方发送 FIN 包后,接收端可能还要发送数据, 不能立即关闭服务器端到客户端的数据通道, 所以也就不能将服务器端的 FIN 包和对客户端的 ACK 包合并发送, 智能先确认 ACK ,然后服务器等到无需发送数据时在发送 FIN 包, 所以四次握手时必须是四次数据包的交互</p>
<h2 id="互联网-因特网-万维网-关系图"><a href="#互联网-因特网-万维网-关系图" class="headerlink" title="互联网 | 因特网 | 万维网 关系图"></a><strong>互联网 | 因特网 | 万维网</strong> 关系图</h2><div style="background-color: rgb(23, 21, 21);width: 300px; margin: auto;padding: 24px;border: 1px solid rgb(117, 255, 154);color: rgb(117, 255, 154);">
    互联网(internet)
    <div style="width: 200px;padding: 24px;margin: auto;border: 1px solid red;color: red;">
        因特网(lnternet)
        <div
            style="width: 100px;padding: 24px;margin: auto;border: 1px solid rgb(255, 229, 82);color: rgb(255, 229, 82);">
            万维网(www)
        </div>
    </div>
</div>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">曦暮流年</div><div class="post-copyright__author_desc">偷懒是进步的动力</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/')">游览器从输入URL到页面展示过程</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/shoukuan/weixin.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/weixin.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/shoukuan/zhifubao.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/shoukuan/zhifubao.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=游览器从输入URL到页面展示过程&amp;url=https://www.ximuliunian.top/2022/08/19/%E7%AC%94%E8%AE%B0/%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%BF%87%E7%A8%8B/&amp;pic=https://img.ximuliunian.top/壁纸/2023-2-4/8.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.ximuliunian.top" target="_blank">曦暮流年</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>小知识<span class="tagsPageCount">9</span></a><a class="post-meta__box__tags" href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>游览器<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E9%A1%B5/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网页<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/URL/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>URL<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://img.ximuliunian.top/壁纸/2023-2-4/13.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/08/12/%E5%89%8D%E7%AB%AF/%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%BB%9F%E8%AE%A1%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-3-4/3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">静态网页统计访问次数</div></div></a></div><div class="next-post pull-right"><a href="/2022/08/28/Git/Git%E7%AE%80%E4%BB%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/文章/Git/简介/静宜夕阳.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git简介</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/08/28/Git/Git%E5%91%BD%E4%BB%A4/" title="Git常用命令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-1-27/3.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-28</div><div class="title">Git常用命令</div></div></a></div><div><a href="/2022/08/28/Git/Git%E7%AE%80%E4%BB%8B/" title="Git简介"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/文章/Git/简介/静宜夕阳.gif" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-28</div><div class="title">Git简介</div></div></a></div><div><a href="/2023/03/10/Git/Git%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8BSSH%E8%BF%9E%E6%8E%A5/" title="Git配置远程SSH连接"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-3-4/11.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-10</div><div class="title">Git配置远程SSH连接</div></div></a></div><div><a href="/2023/06/27/java/%E4%BD%BF%E7%94%A8Java%E8%BF%9B%E8%A1%8Cjson%E7%9A%84%E8%AF%BB%E5%8F%96%E4%BA%8E%E5%86%99%E5%85%A5/" title="使用Java进行json的读取于写入"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/1.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-06-27</div><div class="title">使用Java进行json的读取于写入</div></div></a></div><div><a href="/2022/08/12/%E5%89%8D%E7%AB%AF/%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E7%BB%9F%E8%AE%A1%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0/" title="静态网页统计访问次数"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-3-4/3.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-12</div><div class="title">静态网页统计访问次数</div></div></a></div><div><a href="/2023/01/04/%E7%AC%94%E8%AE%B0/Typora%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/" title="Typora图片上传"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/14.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-04</div><div class="title">Typora图片上传</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">顺境不惰，逆境不妥，以心制境，万事可成</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">曦暮流年</h1><div class="author-info__desc">偷懒是进步的动力</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/ximuliunian" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1304924540" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B8%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E4%B8%BB%E8%A6%81%E7%BB%8F%E8%BF%87%E4%B8%83%E4%B8%AA%E8%BF%87%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">游览器从输入URL到页面展示主要经过七个过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5-URL"><span class="toc-number">2.1.</span> <span class="toc-text">输入 URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-%E8%A7%A3%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text">DNS 解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">详细过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B-TCP-%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.3.</span> <span class="toc-text">建立 TCP 连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">2.3.1.</span> <span class="toc-text">TCP 三次握手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-TCP-%E9%87%87%E7%94%A8%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B-%E4%B8%A4%E6%AC%A1%E4%B8%8D%E8%A1%8C%E5%90%97"><span class="toc-number">2.3.2.</span> <span class="toc-text">为什么 TCP 采用三次握手 两次不行吗?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81-HTTP-HTTPS-%E8%AF%B7%E6%B1%82"><span class="toc-number">2.4.</span> <span class="toc-text">发送 HTTP &#x2F; HTTPS 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E8%AF%B7%E6%B1%82"><span class="toc-number">2.5.</span> <span class="toc-text">服务器响应请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%B8%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.6.</span> <span class="toc-text">游览器解析渲染页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E7%BB%93%E6%9D%9F-%E6%96%AD%E5%BC%80-TCP-%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.7.</span> <span class="toc-text">HTTP 请求结束,断开 TCP 连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%BF%87%E7%A8%8B"><span class="toc-number">2.7.1.</span> <span class="toc-text">TCP 四次挥手过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E6%8F%A1%E6%89%8B%E4%B8%89%E6%AC%A1-%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E6%97%B6%E9%9C%80%E8%A6%81%E5%9B%9B%E6%AC%A1%E5%91%A2"><span class="toc-number">2.7.2.</span> <span class="toc-text">为什么建立连接握手三次,关闭连接时需要四次呢?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91-%E5%9B%A0%E7%89%B9%E7%BD%91-%E4%B8%87%E7%BB%B4%E7%BD%91-%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-number">3.</span> <span class="toc-text">互联网 | 因特网 | 万维网 关系图</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/09/%E4%BA%91%E7%9B%98/123%E4%BA%91%E7%9B%98API%E5%B0%81%E8%A3%85/" title="123云盘API封装"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-2-4/13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="123云盘API封装"/></a><div class="content"><a class="title" href="/2024/05/09/%E4%BA%91%E7%9B%98/123%E4%BA%91%E7%9B%98API%E5%B0%81%E8%A3%85/" title="123云盘API封装">123云盘API封装</a><time datetime="2024-05-09T17:11:12.000Z" title="发表于 2024-05-09 17:11:12">2024-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/14/%E7%AE%97%E6%B3%95/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95/" title="滑动窗口"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="滑动窗口"/></a><div class="content"><a class="title" href="/2023/11/14/%E7%AE%97%E6%B3%95/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95/" title="滑动窗口">滑动窗口</a><time datetime="2023-11-14T19:57:00.000Z" title="发表于 2023-11-14 19:57:00">2023-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/12/%E5%89%8D%E7%AB%AF/%E6%97%A5%E5%8E%86%E5%B0%8F%E6%A1%88%E4%BE%8B/" title="日历小案例"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="日历小案例"/></a><div class="content"><a class="title" href="/2023/10/12/%E5%89%8D%E7%AB%AF/%E6%97%A5%E5%8E%86%E5%B0%8F%E6%A1%88%E4%BE%8B/" title="日历小案例">日历小案例</a><time datetime="2023-10-12T17:19:51.000Z" title="发表于 2023-10-12 17:19:51">2023-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/27/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="cloudflared内网穿透"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cloudflared内网穿透"/></a><div class="content"><a class="title" href="/2023/09/27/%E7%AC%94%E8%AE%B0/cloudflare%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="cloudflared内网穿透">cloudflared内网穿透</a><time datetime="2023-09-27T19:45:41.000Z" title="发表于 2023-09-27 19:45:41">2023-09-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/15/java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="Java多线程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.ximuliunian.top/壁纸/2023-4-13/2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java多线程"/></a><div class="content"><a class="title" href="/2023/07/15/java/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="Java多线程">Java多线程</a><time datetime="2023-07-15T00:30:34.000Z" title="发表于 2023-07-15 00:30:34">2023-07-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:a3436528385@outlook.com" title="email"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-youjian"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1304924540" title="Bilibili"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="deal_link" href="tencent://Message/?Uin=2515550574&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" title="QQ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/touxiang.png" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/ximuliunian" title="Github"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://t.me/xm_ln" title="Telegram"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram"></use></svg></a><a class="deal_link" target="_blank" rel="noopener" href="https://twitter.com/xi_mu_liu_nian" title="Twitter"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter"></use></svg></a></div><div class="copyright">&copy;2022 - 2024 By 曦暮流年</div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">7</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.ximuliunian.top/" title="主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="主页"/><span class="back-menu-item-text">主页</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.ximuliunian.top" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://nav.ximuliunian.top" title="导航栏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="导航栏"/><span class="back-menu-item-text">导航栏</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gpt.ximuliunian.top" title="GPT"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GPT"/><span class="back-menu-item-text">GPT</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-huidang"></use></svg><span> 回档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 下载</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/Download/Windows.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pcduandiannao"></use></svg><span> PC端</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/Download/Android.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shouji"></use></svg><span> 移动端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wallpaper/TuPian.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bianpingbizhi"></use></svg><span> 壁纸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/geren/ghjs.html"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-ghjs"></use></svg><span> github加速</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 0.88rem;">API<sup>1</sup></a><a href="/tags/BFC/" style="font-size: 0.88rem;">BFC<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 0.88rem;">CSS<sup>1</sup></a><a href="/tags/CentOS-7/" style="font-size: 0.88rem;">CentOS 7<sup>2</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>3</sup></a><a href="/tags/GitHub/" style="font-size: 0.88rem;">GitHub<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>2</sup></a><a href="/tags/SSH/" style="font-size: 0.88rem;">SSH<sup>1</sup></a><a href="/tags/URL/" style="font-size: 0.88rem;">URL<sup>1</sup></a><a href="/tags/bat/" style="font-size: 0.88rem;">bat<sup>1</sup></a><a href="/tags/cloudflare/" style="font-size: 0.88rem;">cloudflare<sup>2</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>5</sup></a><a href="/tags/office/" style="font-size: 0.88rem;">office<sup>1</sup></a><a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 0.88rem;">二叉树<sup>1</sup></a><a href="/tags/%E4%BA%91%E7%9B%98/" style="font-size: 0.88rem;">云盘<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 0.88rem;">代码<sup>7</sup></a><a href="/tags/%E4%BF%AE%E6%94%B9/" style="font-size: 0.88rem;">修改<sup>1</sup></a><a href="/tags/%E5%85%83%E7%B4%A0/" style="font-size: 0.88rem;">元素<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 0.88rem;">内网穿透<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>2</sup></a><a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">命令<sup>2</sup></a><a href="/tags/%E5%B0%8F%E5%AE%9E%E4%BE%8B/" style="font-size: 0.88rem;">小实例<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">小知识<sup>9</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>9</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF/" style="font-size: 0.88rem;">微软<sup>1</sup></a><a href="/tags/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" style="font-size: 0.88rem;">报错解决方法<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%8E%86/" style="font-size: 0.88rem;">日历<sup>1</sup></a><a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 0.88rem;">注释<sup>1</sup></a><a href="/tags/%E6%B8%B8%E8%A7%88%E5%99%A8/" style="font-size: 0.88rem;">游览器<sup>2</sup></a><a href="/tags/%E7%99%BD%E5%AB%96/" style="font-size: 0.88rem;">白嫖<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>3</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">系统<sup>2</sup></a><a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 0.88rem;">编辑器<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%9B%98/" style="font-size: 0.88rem;">网盘<sup>1</sup></a><a href="/tags/%E7%BD%91%E9%A1%B5/" style="font-size: 0.88rem;">网页<sup>1</sup></a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 0.88rem;">脚本<sup>4</sup></a><a href="/tags/%E9%82%AE%E7%AE%B1/" style="font-size: 0.88rem;">邮箱<sup>1</sup></a><a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 0.88rem;">链接<sup>1</sup></a><a href="/tags/%E9%AB%98%E4%BA%AE/" style="font-size: 0.88rem;">高亮<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("21/01/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      "-----------------------------------"
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 曦暮流年 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="/js/iconfont.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>